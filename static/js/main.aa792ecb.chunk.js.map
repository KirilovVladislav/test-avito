{"version":3,"sources":["components/Comment/Comment.module.scss","components/Comments/Comments.module.scss","components/NewsInfo/NewsInfo.module.scss","components/NewsItem/NewsItem.module.scss","components/Overlay/Overlay.module.scss","slice/appSlice.js","slice/newsSlice.js","utils/mapTime.js","components/Time/Time.jsx","components/NewsInfo/NewsInfo.jsx","components/NewsItem/NewsItem.jsx","pages/HomePage.jsx","components/Comment/Comment.jsx","components/Comments/Comments.jsx","pages/NewsPage.jsx","components/Overlay/Overlay.jsx","components/ButtonUpdate/ButtonUpdate.jsx","App.js","store.js","api.js","index.js"],"names":["module","exports","slice","createSlice","name","initialState","initialized","error","reducers","setInitialized","state","action","payload","setError","actions","newsIdList","news","activeNews","comments","setNewsIdList","setNewsItem","setActiveNews","descendants","clearActiveNews","setComment","getItem","id","callback","setter","dispatch","_","api","a","get","res","data","deleted","mapTime","timestamp","seconds","Math","floor","Date","interval","Time","memo","time","children","useState","timeAgo","setTimeAgo","useEffect","setInterval","clearInterval","NewsInfo","score","by","className","styles","newsInfo","NewsItem","useDispatch","newsData","useSelector","find","i","ListGroup","Item","to","title","HomePage","updateData","map","item","Comment","itemInfo","setItemInfo","showCommentsTree","setShowCommentsTree","text","Card","card","Container","Title","Body","dangerouslySetInnerHTML","__html","kids","Button","onClick","prev","btn","variant","Comments","container","header","counter","compose","withRouter","itemId","match","params","setNewsData","useCallback","href","url","target","Overlay","overlay","Spinner","animation","role","ButtonUpdate","StyledContainer","styled","Header","StyledAlert","Alert","App","app","update","setUpdate","alertMessage","setAlertMessage","isHandleUpdate","setIsHandleUpdate","idList","setIdList","updateInterval","timeout","setTimeout","clearTimeout","clearActiveItem","handleUpdate","path","exact","render","axios","baseURL","credentials","origin","interceptors","response","use","err","statusText","createAPI","store","configureStore","reducer","appReducer","newsReducer","middleware","getDefaultMiddleware","thunk","extraArgument","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.aa792ecb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Comment_card__B2R2M\",\"btn\":\"Comment_btn__1QWQt\",\"text\":\"Comment_text__1-ryg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Comments_container__2gEP4\",\"header\":\"Comments_header__lTxDu\",\"counter\":\"Comments_counter__AvQSJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newsInfo\":\"NewsInfo_newsInfo__10hh7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"NewsItem_title__2B4D3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__3_p4L\"};","import { createSlice } from '@reduxjs/toolkit'\r\n\r\n\r\nconst initialState = {\r\n  initialized: false,\r\n  error: null,\r\n}\r\n\r\n\r\nconst slice = createSlice({\r\n  name: `app`,\r\n  initialState,\r\n  reducers: {\r\n    setInitialized(state, action) {\r\n      state.initialized = action.payload\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload\r\n    },\r\n  }\r\n})\r\n\r\n\r\nexport const {\r\n  setInitialized,\r\n  setError,\r\n} = slice.actions\r\n\r\nexport default slice.reducer\r\n\r\n","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nimport { setInitialized } from './appSlice'\r\n\r\nconst PAGE_SIZE = 100\r\n\r\nconst initialState = {\r\n  newsIdList: [],\r\n  news: [],\r\n  activeNews: null,\r\n  comments: [],\r\n}\r\n\r\n\r\nconst slice = createSlice({\r\n  name: `news`,\r\n  initialState,\r\n  reducers: {\r\n    setNewsIdList(state, action) {\r\n      if (state.newsIdList[0] !== action.payload[0]) {\r\n\r\n        state.newsIdList = action.payload\r\n      }\r\n    },\r\n    setNewsItem(state, action) {\r\n      state.news = [...state.news, action.payload]\r\n    },\r\n    setActiveNews(state, action) {\r\n      if (!state.activeNews) {\r\n        state.activeNews = action.payload\r\n      } else if (state.activeNews.descendants !== action.payload.descendants) {\r\n        state.activeNews = action.payload\r\n      }\r\n    },\r\n    clearActiveNews(state) {\r\n      state.activeNews = null\r\n    },\r\n    setComment(state, action) {\r\n      state.comments = [...state.comments, action.payload]\r\n    },\r\n  }\r\n})\r\n\r\n\r\nexport const {\r\n  setNewsIdList,\r\n  setNewsItem,\r\n  setActiveNews,\r\n  clearActiveNews,\r\n  setComment,\r\n} = slice.actions\r\n\r\n\r\nexport const getItem = (id, callback, setter) => async (dispatch, _, api) => {\r\n  const res = await api.get(`/item/${id}.json`)\r\n  if (res && res.data) {\r\n    if (res.data.deleted) {\r\n      return\r\n    }\r\n    dispatch(slice.actions[callback](res.data))\r\n    setter && setter(res.data)\r\n  }\r\n}\r\n\r\nexport const getNewsIdList = () => async (dispatch, _, api) => {\r\n  const res = await api.get(`/newstories.json`)\r\n  const idList = res.data.slice(0, PAGE_SIZE)\r\n  dispatch(setNewsIdList(idList))\r\n  dispatch(setInitialized(true))\r\n}\r\n\r\n\r\nexport default slice.reducer","export const mapTime = (timestamp) => {\n    const seconds = Math.floor(((new Date() - timestamp * 1000) / 1000))\n\n    let interval = Math.floor(seconds / 31536000)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} year`\n        }\n        return `${interval} years`\n    }\n    interval = Math.floor(seconds / 2592000)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} month`\n        }\n        return `${interval} months`\n    }\n    interval = Math.floor(seconds / 86400)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} day`\n        }\n        return `${interval} days`\n    }\n    interval = Math.floor(seconds / 3600)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} hour`\n        }\n        return `${interval} hours`\n    }\n    interval = Math.floor(seconds / 60)\n\n\n    if (interval === 1) {\n        return `${interval} minute`\n    }\n    return `${interval} minutes`\n}","import React, { memo, useEffect, useState } from 'react'\n\nimport { mapTime } from '../../utils/mapTime'\n\nexport const Time = memo(({ time, children }) => {\n  const [timeAgo, setTimeAgo] = useState(mapTime(time))\n  useEffect(() => {\n    const interval = setInterval(() => setTimeAgo(mapTime(time)), 1000 * 60)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  return (\n    <span>\n      {`${timeAgo}`}\n      {children}\n    </span>\n  )\n})\n","import React, { memo } from 'react'\n\nimport styles from './NewsInfo.module.scss'\nimport { Time } from '../Time/Time'\n\nexport const NewsInfo = memo(({ score, by, time }) => {\n  return (\n    <p className={styles.newsInfo}>\n      <span>{`${score} ${score === 1 ? `point` : `points`}`}</span>\n      <span>{`by ${by}`}</span>\n      <Time time={time}> ago</Time>\n    </p>\n  )\n})\n","import React, { memo, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { ListGroup } from 'react-bootstrap'\n\nimport { getItem } from '../../slice/newsSlice'\nimport { NewsInfo } from '../NewsInfo/NewsInfo'\nimport styles from './NewsItem.module.scss'\n\nexport const NewsItem = memo(({ id }) => {\n  const dispatch = useDispatch()\n  const newsData = useSelector((state) =>\n    state.news.news.find((i) => i.id === id)\n  )\n\n  useEffect(() => {\n    !newsData && dispatch(getItem(id, `setNewsItem`))\n  }, [])\n\n  return (\n    newsData && (\n      <ListGroup.Item>\n        <Link to={`/item/${id}`}>\n          <h3 className={styles.title}>{`${newsData.title}`}</h3>\n        </Link>\n        <NewsInfo {...newsData} />\n      </ListGroup.Item>\n    )\n  )\n})\n","import React, { memo, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport { ListGroup } from 'react-bootstrap'\n\nimport { NewsItem } from '../components/NewsItem/NewsItem'\n\nconst HomePage = ({ updateData }) => {\n  const newsIdList = useSelector((state) => state.news.newsIdList)\n\n  useEffect(() => {\n    updateData()\n  }, [])\n\n  return (\n    <ListGroup>\n      {newsIdList.map((item) => (\n        <NewsItem key={item} id={item} />\n      ))}\n    </ListGroup>\n  )\n}\n\nexport default memo(HomePage)\n","import React, { memo, useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Card, Container, Button } from 'react-bootstrap'\n\nimport { getItem } from '../../slice/newsSlice'\nimport styles from './Comment.module.scss'\n\nexport const Comment = memo(({ id }) => {\n  const dispatch = useDispatch()\n  const [itemInfo, setItemInfo] = useState({})\n  const [showCommentsTree, setShowCommentsTree] = useState(false)\n\n  useEffect(() => {\n    dispatch(getItem(id, `setComment`, setItemInfo))\n  }, [])\n\n  const toggleShowInnerComments = () => {\n    setShowCommentsTree((prev) => !prev)\n  }\n\n  return (\n    <>\n      {itemInfo.text && (\n        <Card className={styles.card}>\n          <Container>\n            <Card.Title>{`${itemInfo.by}`}</Card.Title>\n            <Card.Body\n              className={styles.text}\n              dangerouslySetInnerHTML={{ __html: `${itemInfo.text}` }}\n            ></Card.Body>\n            {itemInfo.kids && (\n              <Button\n                onClick={toggleShowInnerComments}\n                className={styles.btn}\n                variant={!showCommentsTree ? `outline-dark` : `dark`}\n              >\n                {!showCommentsTree ? `Show more comments` : `Hide comments`}\n              </Button>\n            )}\n            {itemInfo.kids &&\n              showCommentsTree &&\n              itemInfo.kids.map((id) => <Comment id={id} key={id} />)}\n          </Container>\n        </Card>\n      )}\n    </>\n  )\n})\n","import React, { memo } from 'react'\nimport { Container } from 'react-bootstrap'\n\nimport { Comment } from '../Comment/Comment'\nimport styles from './Comments.module.scss'\n\nexport const Comments = memo(({ kids = [], descendants, children }) => {\n  return (\n    <section>\n      <Container className={styles.container}>\n        <h4 className={styles.header}>\n          Comments\n          <span className={styles.counter}>{`${descendants}`}</span>\n        </h4>\n        {children}\n      </Container>\n      {kids.map((id) => (\n        <Comment id={id} key={id} />\n      ))}\n    </section>\n  )\n})\n","import React, { memo, useEffect, useState, useCallback } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { compose } from 'redux'\nimport { Container } from 'react-bootstrap'\n\nimport { NewsInfo } from '../components/NewsInfo/NewsInfo'\nimport { Comments } from '../components/Comments/Comments'\nimport { getItem } from '../slice/newsSlice'\n\nconst NewsPage = ({ match }) => {\n  const { itemId } = match.params\n  const dispatch = useDispatch()\n  const [newsData, setNewsData] = useState({})\n\n  const setter = useCallback((data) => setNewsData(data), [])\n\n  useEffect(() => {\n    dispatch(getItem(itemId, `setActiveNews`, setter))\n  }, [])\n\n  return (\n    <>\n      {newsData.title && (\n        <Container>\n          <a href={`${newsData.url}`} target=\"_blank\">\n            <h3>{`${newsData.title}`}</h3>\n          </a>\n          <NewsInfo className={`mx-auto`} {...newsData} />\n          <Comments {...newsData}></Comments>\n        </Container>\n      )}\n    </>\n  )\n}\n\nexport default compose(memo, withRouter)(NewsPage)\n","import React, { memo } from 'react'\nimport { Spinner } from 'react-bootstrap'\n\nimport styles from './Overlay.module.scss'\n\nexport const Overlay = memo(() => {\n  return (\n    <section className={styles.overlay}>\n      <Spinner animation=\"border\" role=\"status\">\n        <span className={`sr-only`}>Loading...</span>\n      </Spinner>\n    </section>\n  )\n})\n","import React, { memo } from 'react'\nimport { Button } from 'react-bootstrap'\n\nexport const ButtonUpdate = memo(({ onClick, children }) => {\n  return <Button onClick={onClick}>{children}</Button>\n})\n","import React, { memo, useEffect, useCallback, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Route, Switch, Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Container, Alert, Button } from 'react-bootstrap'\n\nimport HomePage from './pages/HomePage'\nimport NewsPage from './pages/NewsPage'\nimport { Overlay } from './components/Overlay/Overlay'\nimport { ButtonUpdate } from './components/ButtonUpdate/ButtonUpdate'\n\nimport { getNewsIdList, getItem, clearActiveNews } from './slice/newsSlice'\n\n\nconst StyledContainer = styled(Container)`\n  padding: 10px;\n\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n`\n\nconst Header = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 10px;\n\n  h2 {\n    margin-bottom: 0;\n    margin-right: auto;\n  }\n\n  .btnBack {\n    margin-right: 10px;\n  }\n\n  @media (max-width: 480px) {\n    flex-wrap: wrap;\n    padding: 10px;\n    padding-bottom: 0;\n\n    h2 {      \n      &.order {\n        order: 1;\n        padding-top: 5px;\n      }\n    }\n  }\n`\n\nconst StyledAlert = styled(Alert)`\n    margin-bottom: 0;\n    padding: 6px 20px;\n    flex-grow: 1;\n`\n\nconst App = () => {\n  const dispatch = useDispatch()\n  const initialized = useSelector((state) => state.app.initialized)\n  const activeNews = useSelector((state) => state.news.activeNews)\n  const newsIdList = useSelector((state) => state.news.newsIdList)\n\n  const [update, setUpdate] = useState(true)\n  const [alertMessage, setAlertMessage] = useState(false)\n  const [isHandleUpdate, setIsHandleUpdate] = useState(false)\n  const [idList, setIdList] = useState(newsIdList)\n\n\n  useEffect(() => {\n    if (newsIdList[0] !== idList[0]) {\n      setIdList(newsIdList)\n      setAlertMessage(false)\n    } else if (isHandleUpdate) {\n      setAlertMessage(true)\n    }\n  }, [newsIdList, isHandleUpdate])\n\n  useEffect(() => {\n    const updateInterval = setInterval(() => {\n      setUpdate(true)\n    }, 1000 * 60)\n    return () => clearInterval(updateInterval)\n  }, [])\n\n  useEffect(() => {\n    if (update) {\n      if (activeNews) {\n        dispatch(getItem(activeNews.id, `setActiveNews`))\n      } else if (!activeNews) {\n        dispatch(getNewsIdList())\n      }\n      setUpdate(false)\n    }\n  }, [update])\n\n\n  useEffect(() => {\n    if (isHandleUpdate) {\n      const timeout = setTimeout(() => {\n        setAlertMessage(false)\n        setIsHandleUpdate(false)\n      }, 5000)\n      return () => clearTimeout(timeout)\n    }\n  }, [isHandleUpdate])\n\n  const clearActiveItem = useCallback(() => dispatch(clearActiveNews()), [])\n  const updateData = useCallback(() => setUpdate(true), [])\n  const handleUpdate = useCallback(() => {\n    setIsHandleUpdate(true)\n    updateData()\n  }, [])\n\n  return (\n    <StyledContainer>\n      <Header>\n        {alertMessage\n          ? <StyledAlert variant={`primary`}>{`there ${activeNews ? 'are' : `is`} no latest ${activeNews ? 'comments' : `news`} in the feed`}</StyledAlert>\n          : <>\n            <h2 className={`${activeNews && `order`}`}>Hacker News</h2>\n            {activeNews && <Link to={`/`}>\n              <Button className={`btnBack`} onClick={clearActiveItem} variant=\"outline-primary\">\n                Back to news list\n            </Button>\n            </Link>}\n            <ButtonUpdate onClick={handleUpdate}>update</ButtonUpdate>\n          </>\n        }\n      </Header>\n      <main>\n        {\n          initialized\n            ? <Switch>\n              <Route path={`/`} exact render={() => <HomePage updateData={updateData} />}></Route>\n              <Route path={`/item/:itemId`} exact render={() => <NewsPage />}></Route>\n            </Switch>\n            : <Overlay />\n        }\n      </main >\n    </StyledContainer>\n  )\n}\n\nexport default memo((App))","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport appReducer from './slice/appSlice'\r\nimport newsReducer from './slice/newsSlice'\r\nimport createAPI from './api'\r\n\r\n\r\nconst api = createAPI((...args) => store.dispatch(...args))\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    app: appReducer,\r\n    news: newsReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) => (\r\n    getDefaultMiddleware({\r\n      thunk: {\r\n        extraArgument: api,\r\n      },\r\n      // serializableCheck: false,\r\n    })\r\n  )\r\n})\r\n\r\n\r\nexport default store","import * as axios from 'axios'\r\n\r\nimport { setError } from './slice/appSlice'\r\n\r\n\r\nconst createAPI = (dispatch) => {\r\n  const api = axios.create({\r\n    baseURL: `https://hacker-news.firebaseio.com/v0/`,\r\n    credentials: true,\r\n    origin: 'http://localhost:3000',\r\n  })\r\n\r\n  const onSuccess = (response) => response\r\n\r\n  const onFail = (err) => {\r\n    dispatch(setError(err.statusText))\r\n    // throw new Error(err.statusText)\r\n  }\r\n\r\n  api.interceptors.response.use(onSuccess, onFail)\r\n\r\n  return api\r\n}\r\n\r\n\r\nexport default createAPI","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n// HashRouter для gh pages\nimport { HashRouter, BrowserRouter } from 'react-router-dom'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport './index.scss'\nimport App from './App'\nimport store from './store'\n\n\nReactDOM.render(\n  // <BrowserRouter>\n  <HashRouter basename={`/`}>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}