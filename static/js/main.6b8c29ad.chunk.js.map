{"version":3,"sources":["components/Comment/Comment.module.scss","components/Comments/Comments.module.scss","components/NewsInfo/NewsInfo.module.scss","components/NewsItem/NewsItem.module.scss","slice/newsSlice.js","utils/mapTime.js","components/Time/Time.jsx","components/NewsInfo/NewsInfo.jsx","components/NewsItem/NewsItem.jsx","components/ButtonUpdate/ButtonUpdate.jsx","hocs/withUpdate.jsx","pages/HomePage.jsx","components/Comment/Comment.jsx","components/Comments/Comments.jsx","pages/NewsPage.jsx","App.js","slice/appSlice.js","store.js","api.js","index.js"],"names":["module","exports","slice","createSlice","name","initialState","newsIdList","news","activeNews","comments","reducers","setNewsIdList","state","action","payload","setNewsItem","sort","a","b","id","clearNews","setActiveNews","setComment","actions","getNewsIdList","dispatch","_","api","get","res","data","getItem","actionType","callback","deleted","mapTime","timestamp","seconds","Math","floor","Date","interval","Time","time","children","useState","timeAgo","setTimeAgo","useEffect","setInterval","clearInterval","NewsInfo","score","by","className","styles","newsInfo","NewsItem","memo","loading","setLoading","useDispatch","useSelector","itemInfo","setItemInfo","title","length","ListGroup","Item","to","ButtonUpdate","handleUpdate","Button","onClick","withUpdate","Component","withRouter","props","itemId","match","params","setData","update","setUpdate","isHandleUpdate","setIsHandleUpdate","alertMessage","setAlertMessage","setCallback","setAction","thank","descendants","timeout","setTimeout","clearTimeout","StyledContainer","styled","Container","Header","header","compose","Alert","variant","Spinner","animation","role","map","item","Comment","showCommentsTree","setShowCommentsTree","text","Card","card","Title","Body","dangerouslySetInnerHTML","__html","kids","prev","btn","Comments","container","counter","href","url","target","Main","main","App","path","exact","render","initialized","error","setInitialized","setError","axios","baseURL","credentials","origin","interceptors","response","use","err","statusText","createAPI","store","configureStore","reducer","app","appReducer","newsReducer","middleware","getDefaultMiddleware","thunk","extraArgument","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.6b8c29ad.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Comment_card__B2R2M\",\"btn\":\"Comment_btn__1QWQt\",\"text\":\"Comment_text__1-ryg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Comments_container__2gEP4\",\"header\":\"Comments_header__lTxDu\",\"counter\":\"Comments_counter__AvQSJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newsInfo\":\"NewsInfo_newsInfo__10hh7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"NewsItem_title__2B4D3\"};","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nconst PAGE_SIZE = 100\r\n\r\nconst initialState = {\r\n  newsIdList: [],\r\n  news: [],\r\n  activeNews: {},\r\n  comments: [],\r\n}\r\n\r\n\r\nconst slice = createSlice({\r\n  name: `news`,\r\n  initialState,\r\n  reducers: {\r\n    setNewsIdList(state, action) {\r\n      state.newsIdList = action.payload\r\n    },\r\n    setNewsItem(state, action) {\r\n      state.news = [...state.news, action.payload]\r\n      state.news.sort((a, b) => b.id - a.id)\r\n    },\r\n    clearNews(state) {\r\n      state.news = []\r\n    },\r\n    setActiveNews(state, action) {\r\n      state.activeNews = action.payload\r\n    },\r\n    setComment(state, action) {\r\n      state.comments = [...state.comments, action.payload]\r\n    },\r\n  }\r\n})\r\n\r\n\r\nexport const {\r\n  setNewsIdList,\r\n  setNewsItem,\r\n  clearNews,\r\n  setActiveNews,\r\n  setComment,\r\n} = slice.actions\r\n\r\n\r\nexport const getNewsIdList = () => async (dispatch, _, api) => {\r\n  const res = await api.get(`/newstories.json`)\r\n  dispatch(setNewsIdList(res.data.slice(0, PAGE_SIZE)))\r\n}\r\n\r\nexport const getItem = (id, actionType, callback) => async (dispatch, _, api) => {\r\n  const res = await api.get(`/item/${id}.json`)\r\n  if (res && res.data) {\r\n    if (res.data.deleted) {\r\n      return\r\n    }\r\n    dispatch(slice.actions[actionType](res.data))\r\n    callback && callback(res.data)\r\n  }\r\n}\r\n\r\n\r\nexport default slice.reducer\r\n\r\n","export const mapTime = (timestamp) => {\n    const seconds = Math.floor(((new Date() - timestamp * 1000) / 1000))\n\n    let interval = Math.floor(seconds / 31536000)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} year`\n        }\n        return `${interval} years`\n    }\n    interval = Math.floor(seconds / 2592000)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} month`\n        }\n        return `${interval} months`\n    }\n    interval = Math.floor(seconds / 86400)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} day`\n        }\n        return `${interval} days`\n    }\n    interval = Math.floor(seconds / 3600)\n\n    if (interval > 1) {\n        if (interval < 2) {\n            return `${interval} hour`\n        }\n        return `${interval} hours`\n    }\n    interval = Math.floor(seconds / 60)\n\n\n    if (interval === 1) {\n        return `${interval} minute`\n    }\n    return `${interval} minutes`\n}","import React, { useEffect, useState } from 'react'\n\nimport { mapTime } from '../../utils/mapTime'\n\nexport const Time = ({ time, children }) => {\n  const [timeAgo, setTimeAgo] = useState(mapTime(time))\n\n  useEffect(() => {\n    const interval = setInterval(() => setTimeAgo(mapTime(time)), 1000 * 60)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  return (\n    <span>\n      {`${timeAgo}`}\n      {children}\n    </span>\n  )\n}\n","import React from 'react'\n\nimport styles from './NewsInfo.module.scss'\nimport { Time } from '../Time/Time'\n\nexport const NewsInfo = ({ score, by, time }) => {\n  return (\n    <p className={styles.newsInfo}>\n      <span>{`${score} point`}</span>\n      <span>{`by ${by}`}</span>\n      <Time time={time}> ago</Time>\n    </p>\n  )\n}\n","import React, { memo, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { ListGroup } from 'react-bootstrap'\n\nimport { getItem } from '../../slice/newsSlice'\nimport { NewsInfo } from '../NewsInfo/NewsInfo'\nimport styles from './NewsItem.module.scss'\n\nexport const NewsItem = memo(({ id, loading, setLoading }) => {\n  const dispatch = useDispatch()\n  const { newsIdList } = useSelector((state) => state.news)\n  const [itemInfo, setItemInfo] = useState({})\n\n  useEffect(() => {\n    dispatch(getItem(id, `setNewsItem`, setItemInfo))\n  }, [])\n\n  useEffect(() => {\n    if (itemInfo.title && newsIdList[newsIdList.length - 1] === id) {\n      setLoading(false)\n    }\n  }, [itemInfo])\n\n  return (\n    <>\n      {!loading && itemInfo.title && (\n        <ListGroup.Item key={id}>\n          <Link to={`/item/${id}`}>\n            <h3 className={styles.title}>{`${itemInfo.title}`}</h3>\n          </Link>\n          <NewsInfo {...itemInfo} />\n        </ListGroup.Item>\n      )}\n    </>\n  )\n})\n","import React from 'react'\nimport { Button } from 'react-bootstrap'\n\nexport const ButtonUpdate = ({ handleUpdate, children }) => {\n  return <Button onClick={handleUpdate}>{children}</Button>\n}\n","import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\n\nimport { getItem, getNewsIdList } from '../slice/newsSlice'\n\nexport const withUpdate = (Component) =>\n  withRouter((props) => {\n    const dispatch = useDispatch()\n    const { activeNews, newsIdList } = useSelector((state) => state.news)\n    const { itemId } = props.match.params\n\n    const [data, setData] = useState({})\n    const [update, setUpdate] = useState(true)\n    const [isHandleUpdate, setIsHandleUpdate] = useState(false)\n    const [alertMessage, setAlertMessage] = useState(null)\n\n    const [callback, setCallback] = useState(null)\n    const [action, setAction] = useState(null)\n\n    const thank = {\n      getNewsIdList: getNewsIdList,\n      getItem: getItem,\n    }\n\n    useEffect(() => {\n      if (update && callback) {\n        dispatch(thank[callback](itemId, action))\n        setUpdate(false)\n      }\n    }, [callback, update])\n\n    useEffect(() => {\n      const interval = setInterval(() => {\n        setUpdate(true)\n      }, 1000 * 60)\n      return () => clearInterval(interval)\n    }, [])\n\n    useEffect(() => {\n      if (activeNews.descendants !== data.descendants) {\n        setData(activeNews)\n        setAlertMessage(null)\n      } else if (isHandleUpdate) {\n        setAlertMessage(true)\n      }\n    }, [activeNews])\n\n    useEffect(() => {\n      if (newsIdList[0] !== data[0]) {\n        setData(newsIdList)\n        setAlertMessage(null)\n      } else if (isHandleUpdate) {\n        setAlertMessage(true)\n      }\n    }, [newsIdList])\n\n    useEffect(() => {\n      if (isHandleUpdate) {\n        const timeout = setTimeout(() => {\n          setAlertMessage(null)\n          setIsHandleUpdate(false)\n        }, 5000)\n        return () => clearTimeout(timeout)\n      }\n    }, [isHandleUpdate])\n\n    const handleUpdate = () => {\n      setIsHandleUpdate(true)\n      setUpdate(true)\n    }\n\n    return (\n      <Component\n        setAction={setAction}\n        setCallback={setCallback}\n        data={data}\n        handleUpdate={handleUpdate}\n        alertMessage={alertMessage}\n        {...props}\n      />\n    )\n  })\n","import React, { memo, useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { compose } from 'redux'\n\nimport { Container, ListGroup, Alert, Spinner } from 'react-bootstrap'\nimport styled from 'styled-components'\n\nimport { clearNews } from '../slice/newsSlice'\nimport { NewsItem } from '../components/NewsItem/NewsItem'\nimport { ButtonUpdate } from '../components/ButtonUpdate/ButtonUpdate'\nimport { withUpdate } from '../hocs/withUpdate'\n\nconst StyledContainer = styled(Container)`\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n`\n\nconst Header = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n\n  @media (max-width: 480px) {\n    padding: 0 10px;\n  }\n`\n\nconst HomePage = ({ setCallback, data = [], handleUpdate, alertMessage }) => {\n  const dispatch = useDispatch()\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    setCallback(`getNewsIdList`)\n    return () => dispatch(clearNews())\n  }, [])\n\n  return (\n    <StyledContainer>\n      <Header>\n        <h2>Hacker News</h2>\n        <ButtonUpdate handleUpdate={handleUpdate}>update news</ButtonUpdate>\n      </Header>\n      {alertMessage && (\n        <Alert variant={`primary`}>there is no latest news in the feed</Alert>\n      )}\n      {loading && (\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"sr-only\">Loading...</span>\n        </Spinner>\n      )}\n      <ListGroup>\n        {data[0] &&\n          data.map((item) => (\n            <NewsItem\n              key={item}\n              loading={loading}\n              setLoading={setLoading}\n              id={item}\n            />\n          ))}\n      </ListGroup>\n    </StyledContainer>\n  )\n}\n\nexport default compose(withUpdate, memo)(HomePage)\n","import React, { useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Card, Container, Button } from 'react-bootstrap'\n\nimport { getItem } from '../../slice/newsSlice'\nimport styles from './Comment.module.scss'\n\nexport const Comment = ({ id }) => {\n  const dispatch = useDispatch()\n  const [itemInfo, setItemInfo] = useState({})\n  const [showCommentsTree, setShowCommentsTree] = useState(false)\n\n  useEffect(() => {\n    dispatch(getItem(id, `setComment`, setItemInfo))\n  }, [])\n\n  const toggleShowInnerComments = () => {\n    setShowCommentsTree((prev) => !prev)\n  }\n\n  return (\n    <>\n      {itemInfo.text && (\n        <Card className={styles.card}>\n          <Container>\n            <Card.Title>{`${itemInfo.by}`}</Card.Title>\n            <Card.Body\n              className={styles.text}\n              dangerouslySetInnerHTML={{ __html: `${itemInfo.text}` }}\n            ></Card.Body>\n            {itemInfo.kids && (\n              <Button\n                onClick={toggleShowInnerComments}\n                className={styles.btn}\n                variant={!showCommentsTree ? `outline-dark` : `dark`}\n              >\n                {!showCommentsTree ? `Show more comments` : `Hide comments`}\n              </Button>\n            )}\n            {itemInfo.kids &&\n              showCommentsTree &&\n              itemInfo.kids.map((id) => <Comment id={id} key={id} />)}\n          </Container>\n        </Card>\n      )}\n    </>\n  )\n}\n","import React from 'react'\nimport { Container } from 'react-bootstrap'\n\nimport { Comment } from '../Comment/Comment'\nimport styles from './Comments.module.scss'\n\nexport const Comments = ({ kids = [], descendants, children }) => {\n  return (\n    <section>\n      <Container className={styles.container}>\n        <h4 className={styles.header}>\n          Comments\n          <span className={styles.counter}>{`${descendants}`}</span>\n        </h4>\n        {children}\n      </Container>\n      {kids.map((id) => (\n        <Comment id={id} key={id} />\n      ))}\n    </section>\n  )\n}\n","import React, { memo, useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { compose } from 'redux'\nimport { Link } from 'react-router-dom'\n\nimport { Container, Alert, Button, Spinner } from 'react-bootstrap'\nimport styled from 'styled-components'\n\nimport { clearNews } from '../slice/newsSlice'\nimport { NewsInfo } from '../components/NewsInfo/NewsInfo'\nimport { Comments } from '../components/Comments/Comments'\nimport { ButtonUpdate } from '../components/ButtonUpdate/ButtonUpdate'\nimport { withUpdate } from '../hocs/withUpdate'\n\nconst StyledNewsInfo = styled(NewsInfo)``\n\nconst NewsPage = ({\n  setAction,\n  setCallback,\n  data = {},\n  handleUpdate,\n  alertMessage = false,\n}) => {\n  const dispatch = useDispatch()\n  useEffect(() => {\n    setCallback(`getItem`)\n    setAction(`setActiveNews`)\n    dispatch(clearNews())\n  }, [])\n\n  return (\n    <Container>\n      {data.title ? (\n        <>\n          <Link to={`/`}>\n            <Button variant=\"outline-primary\">Back to news list</Button>\n          </Link>\n          <a href={`${data.url}`} target=\"_blank\">\n            <h3>{`${data.title}`}</h3>\n          </a>\n          <NewsInfo className={`mx-auto`} {...data} />\n          {alertMessage && (\n            <Alert variant={`primary`}>\n              there are no latest comments in the feed\n            </Alert>\n          )}\n          <Comments {...data}>\n            <ButtonUpdate handleUpdate={handleUpdate}>\n              update comments\n            </ButtonUpdate>\n          </Comments>\n        </>\n      ) : (\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"sr-only\">Loading...</span>\n        </Spinner>\n      )}\n    </Container>\n  )\n}\n\nexport default compose(withUpdate, memo)(NewsPage)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport HomePage from './pages/HomePage'\nimport NewsPage from './pages/NewsPage'\n\n\nconst Main = styled.main`\n  padding: 10px 0;\n`\n\nconst App = () => {\n  return (\n    <Main>\n      <Switch>\n        <Route path={`/`} exact render={() => <HomePage />}></Route>\n        <Route path={`/item/:itemId`} exact render={() => <NewsPage />}></Route>\n      </Switch>\n    </Main >\n  )\n}\n\n\nexport default App","import { createSlice } from '@reduxjs/toolkit'\r\n\r\n\r\nconst initialState = {\r\n  initialized: false,\r\n  error: null,\r\n}\r\n\r\n\r\nconst slice = createSlice({\r\n  name: `app`,\r\n  initialState,\r\n  reducers: {\r\n    setInitialized(state, action) {\r\n      state.initialized = action.payload\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload\r\n    },\r\n  }\r\n})\r\n\r\n\r\nexport const {\r\n  setInitialized,\r\n  setError,\r\n} = slice.actions\r\n\r\nexport default slice.reducer\r\n\r\n","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport appReducer from './slice/appSlice'\r\nimport newsReducer from './slice/newsSlice'\r\nimport createAPI from './api'\r\n\r\n\r\nconst api = createAPI((...args) => store.dispatch(...args))\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    app: appReducer,\r\n    news: newsReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) => (\r\n    getDefaultMiddleware({\r\n      thunk: {\r\n        extraArgument: api,\r\n      },\r\n      // serializableCheck: false,\r\n    })\r\n  )\r\n})\r\n\r\n\r\nexport default store","import * as axios from 'axios'\r\n\r\nimport { setError } from './slice/appSlice'\r\n\r\n\r\nconst createAPI = (dispatch) => {\r\n  const api = axios.create({\r\n    baseURL: `https://hacker-news.firebaseio.com/v0/`,\r\n    credentials: true,\r\n    origin: 'http://localhost:3000',\r\n  })\r\n\r\n  const onSuccess = (response) => response\r\n\r\n  const onFail = (err) => {\r\n    dispatch(setError(err.statusText))\r\n    // throw new Error(err.statusText)\r\n  }\r\n\r\n  api.interceptors.response.use(onSuccess, onFail)\r\n\r\n  return api\r\n}\r\n\r\n\r\nexport default createAPI","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n// HashRouter для gh pages\n// \"homepage\": \"https://KirilovVladislav.github.io/test-avito\",\nimport { HashRouter, BrowserRouter } from 'react-router-dom'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport './index.scss'\nimport App from './App'\nimport store from './store'\n\n\nReactDOM.render(\n  // <BrowserRouter>\n  <HashRouter basename={`https://KirilovVladislav.github.io/test-avito`}>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}