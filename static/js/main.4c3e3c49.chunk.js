(this["webpackJsonptest-avito"]=this["webpackJsonptest-avito"]||[]).push([[0],{31:function(e,t,n){e.exports={card:"Comment_card__B2R2M",btn:"Comment_btn__1QWQt",text:"Comment_text__1-ryg"}},32:function(e,t,n){e.exports={container:"Comments_container__2gEP4",header:"Comments_header__lTxDu",counter:"Comments_counter__AvQSJ"}},55:function(e,t,n){e.exports={newsInfo:"NewsInfo_newsInfo__10hh7"}},56:function(e,t,n){e.exports={title:"NewsItem_title__2B4D3"}},57:function(e,t,n){e.exports={overlay:"Overlay_overlay__3_p4L"}},74:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(16),s=n.n(r),i=n(8),o=n(19),u=(n(73),n(74),n(12)),j=n(30),b=n(5),d=n(33),l=n(95),f=n(98),m=n(96),O=n(99),h=n(24),x=n(25),p=n.n(x),w=n(37),v=n(40),y=n(21),N=Object(y.b)({name:"app",initialState:{initialized:!1,error:null},reducers:{setInitialized:function(e,t){e.initialized=t.payload},setError:function(e,t){e.error=t.payload}}}),_=N.actions,k=_.setInitialized,I=_.setError,g=N.reducer,C=Object(y.b)({name:"news",initialState:{newsIdList:[],news:[],activeNews:null,comments:[]},reducers:{setNewsIdList:function(e,t){e.newsIdList[0]!==t.payload[0]&&(e.newsIdList=t.payload)},setNewsItem:function(e,t){e.news=[].concat(Object(v.a)(e.news),[t.payload])},setActiveNews:function(e,t){e.activeNews?e.activeNews.descendants!==t.payload.descendants&&(e.activeNews=t.payload):e.activeNews=t.payload},clearActiveNews:function(e){e.activeNews=null},setComment:function(e,t){e.comments=[].concat(Object(v.a)(e.comments),[t.payload])}}}),E=C.actions,S=E.setNewsIdList,L=(E.setNewsItem,E.setActiveNews,E.clearActiveNews),A=(E.setComment,function(e,t,n){return function(){var c=Object(w.a)(p.a.mark((function c(a,r,s){var i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.get("/item/".concat(e,".json"));case 2:if(!(i=c.sent)||!i.data){c.next=8;break}if(!i.data.deleted){c.next=6;break}return c.abrupt("return");case 6:a(C.actions[t](i.data)),n&&n(i.data);case 8:case"end":return c.stop()}}),c)})));return function(e,t,n){return c.apply(this,arguments)}}()}),M=C.reducer,T=n(55),z=n.n(T),B=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n,n<2?" year":" years"):(n=Math.floor(t/2592e3))>1?"".concat(n,n<2?" month":" months"):(n=Math.floor(t/86400))>1?"".concat(n,n<2?" day":" days"):(n=Math.floor(t/3600))>1?"".concat(n,n<2?" hour":" hours"):(n=Math.floor(t/60),"".concat(n,1===n?" minute":" minutes"))},D=Object(a.memo)((function(e){var t=e.time,n=e.children,r=Object(a.useState)(B(t)),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return o(B(t))}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.jsxs)("span",{children:["".concat(i),n]})})),F=Object(a.memo)((function(e){var t=e.score,n=e.by,a=e.time;return Object(c.jsxs)("p",{className:z.a.newsInfo,children:[Object(c.jsx)("span",{children:"".concat(t," ").concat(1===t?"point":"points")}),Object(c.jsx)("span",{children:"by ".concat(n)}),Object(c.jsx)(D,{time:a,children:" ago"})]})})),H=n(56),J=n.n(H),Q=Object(a.memo)((function(e){var t=e.id,n=Object(i.b)(),r=Object(i.c)((function(e){return e.news.news.find((function(e){return e.id===t}))}));return Object(a.useEffect)((function(){!r&&n(A(t,"setNewsItem"))}),[]),r&&Object(c.jsxs)(O.a.Item,{children:[Object(c.jsx)(o.b,{to:"/item/".concat(t),children:Object(c.jsx)("h3",{className:J.a.title,children:"".concat(r.title)})}),Object(c.jsx)(F,Object(h.a)({},r))]})})),R=function(e){var t=e.updateData,n=Object(i.c)((function(e){return e.news.newsIdList}));return Object(a.useEffect)((function(){t()}),[]),Object(c.jsx)(O.a,{children:n.map((function(e){return Object(c.jsx)(Q,{id:e},e)}))})},P=Object(a.memo)(R),U=n(10),W=n(100),q=n(31),G=n.n(q),K=Object(a.memo)((function(e){var t=e.id,n=Object(i.b)(),r=Object(a.useState)({}),s=Object(u.a)(r,2),o=s[0],j=s[1],b=Object(a.useState)(!1),d=Object(u.a)(b,2),f=d[0],O=d[1];Object(a.useEffect)((function(){n(A(t,"setComment",j))}),[]);return Object(c.jsx)(c.Fragment,{children:o.text&&Object(c.jsx)(W.a,{className:G.a.card,children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(W.a.Title,{children:"".concat(o.by)}),Object(c.jsx)(W.a.Body,{className:G.a.text,dangerouslySetInnerHTML:{__html:"".concat(o.text)}}),o.kids&&Object(c.jsx)(m.a,{onClick:function(){O((function(e){return!e}))},className:G.a.btn,variant:f?"dark":"outline-dark",children:f?"Hide comments":"Show more comments"}),o.kids&&f&&o.kids.map((function(e){return Object(c.jsx)(K,{id:e},e)}))]})})})})),V=n(32),X=n.n(V),Y=Object(a.memo)((function(e){var t=e.kids,n=void 0===t?[]:t,a=e.descendants,r=e.children;return Object(c.jsxs)("section",{children:[Object(c.jsxs)(l.a,{className:X.a.container,children:[Object(c.jsxs)("h4",{className:X.a.header,children:["Comments",Object(c.jsx)("span",{className:X.a.counter,children:"".concat(a)})]}),r]}),n.map((function(e){return Object(c.jsx)(K,{id:e},e)}))]})})),Z=Object(U.d)(a.memo,b.f)((function(e){var t=e.match.params.itemId,n=Object(i.b)(),r=Object(a.useState)({}),s=Object(u.a)(r,2),o=s[0],j=s[1],b=Object(a.useCallback)((function(e){return j(e)}),[]);return Object(a.useEffect)((function(){n(A(t,"setActiveNews",b))}),[]),Object(c.jsx)(c.Fragment,{children:o.title&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("a",{href:"".concat(o.url),target:"_blank",children:Object(c.jsx)("h3",{children:"".concat(o.title)})}),Object(c.jsx)(F,Object(h.a)({className:"mx-auto"},o)),Object(c.jsx)(Y,Object(h.a)({},o))]})})})),$=n(97),ee=n(57),te=n.n(ee),ne=Object(a.memo)((function(){return Object(c.jsx)("section",{className:te.a.overlay,children:Object(c.jsx)($.a,{animation:"border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})})),ce=Object(a.memo)((function(e){var t=e.onClick,n=e.children;return Object(c.jsx)(m.a,{onClick:t,children:n})}));function ae(){var e=Object(j.a)(["\n    margin-bottom: 0;\n    padding: 6px 20px;\n    flex-grow: 1;\n"]);return ae=function(){return e},e}function re(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 10px;\n\n  h2 {\n    margin-bottom: 0;\n  }\n\n  @media (max-width: 480px) {\n    padding: 0 10px;\n  }\n"]);return re=function(){return e},e}function se(){var e=Object(j.a)(["\n  padding: 10px;\n\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n"]);return se=function(){return e},e}var ie=Object(d.a)(l.a)(se()),oe=d.a.header(re()),ue=Object(d.a)(f.a)(ae()),je=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.app.initialized})),n=Object(i.c)((function(e){return e.news.activeNews})),r=Object(i.c)((function(e){return e.news.newsIdList})),s=Object(a.useState)(!0),j=Object(u.a)(s,2),d=j[0],l=j[1],f=Object(a.useState)(!1),O=Object(u.a)(f,2),h=O[0],x=O[1],v=Object(a.useState)(!1),y=Object(u.a)(v,2),N=y[0],_=y[1],I=Object(a.useState)(r),g=Object(u.a)(I,2),C=g[0],E=g[1];Object(a.useEffect)((function(){r[0]!==C[0]?(E(r),x(!1)):N&&x(!0)}),[r,N]),Object(a.useEffect)((function(){var e=setInterval((function(){l(!0)}),6e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){d&&(n?e(A(n.id,"setActiveNews")):n||e(function(){var e=Object(w.a)(p.a.mark((function e(t,n,c){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/newstories.json");case 2:a=e.sent,r=a.data.slice(0,100),t(S(r)),t(k(!0));case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()),l(!1))}),[d]),Object(a.useEffect)((function(){if(N){var e=setTimeout((function(){x(!1),_(!1)}),5e3);return function(){return clearTimeout(e)}}}),[N]);var M=Object(a.useCallback)((function(){return e(L())}),[]),T=Object(a.useCallback)((function(){return l(!0)}),[]),z=Object(a.useCallback)((function(){_(!0),T()}),[]);return Object(c.jsxs)(ie,{children:[Object(c.jsx)(oe,{children:h?Object(c.jsx)(ue,{variant:"primary",children:"there ".concat(n?"are":"is"," no latest ").concat(n?"comments":"news"," in the feed")}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"Hacker News"}),n&&Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(m.a,{onClick:M,variant:"outline-primary",children:"Back to news list"})}),Object(c.jsx)(ce,{onClick:z,children:"update"})]})}),Object(c.jsx)("main",{children:t?Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(P,{updateData:T})}}),Object(c.jsx)(b.a,{path:"/item/:itemId",exact:!0,render:function(){return Object(c.jsx)(Z,{})}})]}):Object(c.jsx)(ne,{})})]})},be=Object(a.memo)(je),de=n(63),le=function(e){var t=de.create({baseURL:"https://hacker-news.firebaseio.com/v0/",credentials:!0,origin:"http://localhost:3000"});return t.interceptors.response.use((function(e){return e}),(function(t){e(I(t.statusText))})),t}((function(){return fe.dispatch.apply(fe,arguments)})),fe=Object(y.a)({reducer:{app:g,news:M},middleware:function(e){return e({thunk:{extraArgument:le}})}}),me=fe;s.a.render(Object(c.jsx)(o.a,{basename:"/",children:Object(c.jsx)(i.a,{store:me,children:Object(c.jsx)(be,{})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.4c3e3c49.chunk.js.map