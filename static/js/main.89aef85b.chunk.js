(this["webpackJsonptest-avito"]=this["webpackJsonptest-avito"]||[]).push([[0],{32:function(e,t,n){e.exports={card:"Comment_card__B2R2M",btn:"Comment_btn__1QWQt",text:"Comment_text__1-ryg"}},33:function(e,t,n){e.exports={container:"Comments_container__2gEP4",header:"Comments_header__lTxDu",counter:"Comments_counter__AvQSJ"}},55:function(e,t,n){e.exports={newsInfo:"NewsInfo_newsInfo__10hh7"}},56:function(e,t,n){e.exports={title:"NewsItem_title__2B4D3"}},57:function(e,t,n){e.exports={overlay:"Overlay_overlay__3_p4L"}},74:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(17),s=n.n(r),i=n(10),o=n(16),u=(n(73),n(74),n(23)),j=n(5),d=n(25),l=n(6),b=n(9),f=n(97),O=n(98),h=n(99),m=n(27),x=n.n(m),p=n(37),w=n(40),v=n(22),g=Object(v.b)({name:"news",initialState:{newsIdList:[],news:[],activeNews:{},comments:[]},reducers:{setNewsIdList:function(e,t){e.newsIdList=t.payload},setNewsItem:function(e,t){e.news=[].concat(Object(w.a)(e.news),[t.payload]),e.news.sort((function(e,t){return t.id-e.id}))},clearNews:function(e){e.news=[]},setActiveNews:function(e,t){e.activeNews=t.payload},setComment:function(e,t){e.comments=[].concat(Object(w.a)(e.comments),[t.payload])}}}),_=g.actions,y=_.setNewsIdList,I=(_.setNewsItem,_.clearNews),N=(_.setActiveNews,_.setComment,function(){return function(){var e=Object(p.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/newstories.json");case 2:a=e.sent,t(y(a.data.slice(0,100)));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}),S=function(e,t,n){return function(){var c=Object(p.a)(x.a.mark((function c(a,r,s){var i;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.get("/item/".concat(e,".json"));case 2:if(!(i=c.sent)||!i.data){c.next=8;break}if(!i.data.deleted){c.next=6;break}return c.abrupt("return");case 6:a(g.actions[t](i.data)),n&&n(i.data);case 8:case"end":return c.stop()}}),c)})));return function(e,t,n){return c.apply(this,arguments)}}()},k=g.reducer,E=n(19),C=n(55),L=n.n(C),M=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n,n<2?" year":" years"):(n=Math.floor(t/2592e3))>1?"".concat(n,n<2?" month":" months"):(n=Math.floor(t/86400))>1?"".concat(n,n<2?" day":" days"):(n=Math.floor(t/3600))>1?"".concat(n,n<2?" hour":" hours"):(n=Math.floor(t/60),"".concat(n,1===n?" minute":" minutes"))},T=function(e){var t=e.time,n=e.children,r=Object(a.useState)(M(t)),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return o(M(t))}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.jsxs)("span",{children:["".concat(i),n]})},A=function(e){var t=e.score,n=e.by,a=e.time;return Object(c.jsxs)("p",{className:L.a.newsInfo,children:[Object(c.jsx)("span",{children:"".concat(t," ").concat(1===t?"point":"points")}),Object(c.jsx)("span",{children:"by ".concat(n)}),Object(c.jsx)(T,{time:a,children:" ago"})]})},U=n(56),B=n.n(U),z=Object(a.memo)((function(e){var t=e.id,n=e.loading,r=e.setLoading,s=Object(i.b)(),u=Object(i.c)((function(e){return e.news})).newsIdList,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){s(S(t,"setNewsItem",f))}),[]),Object(a.useEffect)((function(){b.title&&u[u.length-1]===t&&r(!1)}),[b]),Object(c.jsx)(c.Fragment,{children:!n&&b.title&&Object(c.jsxs)(h.a.Item,{children:[Object(c.jsx)(o.b,{to:"/item/".concat(t),children:Object(c.jsx)("h3",{className:B.a.title,children:"".concat(b.title)})}),Object(c.jsx)(A,Object(E.a)({},b))]},t)})})),Y=n(95),D=function(e){var t=e.handleUpdate,n=e.children;return Object(c.jsx)(Y.a,{onClick:t,children:n})},F=n(96),H=n(57),J=n.n(H),Q=function(){return Object(c.jsx)("section",{className:J.a.overlay,children:Object(c.jsx)(F.a,{animation:"border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})},R=function(e){return Object(j.f)((function(t){var n=Object(i.b)(),r=Object(i.c)((function(e){return e.news})),s=r.activeNews,o=r.newsIdList,u=t.match.params.itemId,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1],O=Object(a.useState)(!0),h=Object(l.a)(O,2),m=h[0],x=h[1],p=Object(a.useState)(!1),w=Object(l.a)(p,2),v=w[0],g=w[1],_=Object(a.useState)(null),y=Object(l.a)(_,2),I=y[0],k=y[1],C=Object(a.useState)(null),L=Object(l.a)(C,2),M=L[0],T=L[1],A=Object(a.useState)(null),U=Object(l.a)(A,2),B=U[0],z=U[1],Y={getNewsIdList:N,getItem:S};Object(a.useEffect)((function(){m&&M&&(n(Y[M](u,B)),x(!1))}),[M,m]),Object(a.useEffect)((function(){var e=setInterval((function(){x(!0)}),6e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){s.descendants!==b.descendants?(f(s),k(null)):v&&k(!0)}),[s]),Object(a.useEffect)((function(){o[0]!==b[0]?(f(o),k(null)):v&&k(!0)}),[o]),Object(a.useEffect)((function(){if(v){var e=setTimeout((function(){k(null),g(!1)}),5e3);return function(){return clearTimeout(e)}}}),[v]);var D=function(){g(!0),x(!0)},F=Object(a.useState)(null),H=Object(l.a)(F,2),J=H[0],Q=H[1],R=Object(a.useState)(null),P=Object(l.a)(R,2),W=P[0],q=P[1],G=Object(a.useState)(null),K=Object(l.a)(G,2),V=K[0],X=K[1],Z=Object(a.useState)(null),$=Object(l.a)(Z,2),ee=$[0],te=$[1];Object(a.useEffect)((function(){0===V&&0==ee&&W-J>100&&D()}),[W]);var ne=function(e){Q(e.touches[0].clientY),X(window.pageYOffset)},ce=function(e){q(e.changedTouches[0].clientY),te(window.pageYOffset)};return Object(c.jsx)(e,Object(E.a)({touchStart:function(e){return ne(e)},touchEnd:function(e){return ce(e)},setAction:z,setCallback:T,data:b,handleUpdate:D,alertMessage:I},t))}))};function P(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n\n  @media (max-width: 480px) {\n    padding: 0 10px;\n  }\n"]);return P=function(){return e},e}function W(){var e=Object(u.a)(["\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n"]);return W=function(){return e},e}var q=Object(d.a)(f.a)(W()),G=d.a.header(P()),K=Object(b.d)(R,a.memo)((function(e){var t=e.setCallback,n=e.data,r=void 0===n?[]:n,s=e.handleUpdate,o=e.alertMessage,u=e.touchStart,j=e.touchEnd,d=Object(i.b)(),b=Object(a.useState)(!0),f=Object(l.a)(b,2),m=f[0],x=f[1];return Object(a.useEffect)((function(){return t("getNewsIdList"),function(){return d(I())}}),[]),Object(c.jsxs)(q,{onTouchStart:u,onTouchEnd:j,children:[Object(c.jsxs)(G,{children:[Object(c.jsx)("h2",{children:"Hacker News"}),Object(c.jsx)(D,{handleUpdate:s,children:"update news"})]}),o&&Object(c.jsx)(O.a,{variant:"primary",children:"there is no latest news in the feed"}),m&&Object(c.jsx)(Q,{}),Object(c.jsx)(h.a,{children:r[0]&&r.map((function(e){return Object(c.jsx)(z,{loading:m,setLoading:x,id:e},e)}))})]})})),V=n(100),X=n(32),Z=n.n(X),$=function e(t){var n=t.id,r=Object(i.b)(),s=Object(a.useState)({}),o=Object(l.a)(s,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),O=b[0],h=b[1];Object(a.useEffect)((function(){r(S(n,"setComment",j))}),[]);return Object(c.jsx)(c.Fragment,{children:u.text&&Object(c.jsx)(V.a,{className:Z.a.card,children:Object(c.jsxs)(f.a,{children:[Object(c.jsx)(V.a.Title,{children:"".concat(u.by)}),Object(c.jsx)(V.a.Body,{className:Z.a.text,dangerouslySetInnerHTML:{__html:"".concat(u.text)}}),u.kids&&Object(c.jsx)(Y.a,{onClick:function(){h((function(e){return!e}))},className:Z.a.btn,variant:O?"dark":"outline-dark",children:O?"Hide comments":"Show more comments"}),u.kids&&O&&u.kids.map((function(t){return Object(c.jsx)(e,{id:t},t)}))]})})})},ee=n(33),te=n.n(ee),ne=function(e){var t=e.kids,n=void 0===t?[]:t,a=e.descendants,r=e.children;return Object(c.jsxs)("section",{children:[Object(c.jsxs)(f.a,{className:te.a.container,children:[Object(c.jsxs)("h4",{className:te.a.header,children:["Comments",Object(c.jsx)("span",{className:te.a.counter,children:"".concat(a)})]}),r]}),n.map((function(e){return Object(c.jsx)($,{id:e},e)}))]})},ce=Object(b.d)(R,a.memo)((function(e){var t=e.setAction,n=e.setCallback,r=e.data,s=void 0===r?{}:r,u=e.handleUpdate,j=e.alertMessage,d=void 0!==j&&j,l=Object(i.b)();return Object(a.useEffect)((function(){n("getItem"),t("setActiveNews"),l(I())}),[]),Object(c.jsx)(f.a,{children:s.title?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(Y.a,{variant:"outline-primary",children:"Back to news list"})}),Object(c.jsx)("a",{href:"".concat(s.url),target:"_blank",children:Object(c.jsx)("h3",{children:"".concat(s.title)})}),Object(c.jsx)(A,Object(E.a)({className:"mx-auto"},s)),d&&Object(c.jsx)(O.a,{variant:"primary",children:"there are no latest comments in the feed"}),Object(c.jsx)(ne,Object(E.a)(Object(E.a)({},s),{},{children:Object(c.jsx)(D,{handleUpdate:u,children:"update comments"})}))]}):Object(c.jsx)(Q,{})})}));function ae(){var e=Object(u.a)(["\n  padding: 10px 0;\n"]);return ae=function(){return e},e}var re=d.a.main(ae()),se=function(){return Object(c.jsx)(re,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(K,{})}}),Object(c.jsx)(j.a,{path:"/item/:itemId",exact:!0,render:function(){return Object(c.jsx)(ce,{})}})]})})},ie=Object(v.b)({name:"app",initialState:{initialized:!1,error:null},reducers:{setInitialized:function(e,t){e.initialized=t.payload},setError:function(e,t){e.error=t.payload}}}),oe=ie.actions,ue=(oe.setInitialized,oe.setError),je=ie.reducer,de=n(63),le=function(e){var t=de.create({baseURL:"https://hacker-news.firebaseio.com/v0/",credentials:!0,origin:"http://localhost:3000"});return t.interceptors.response.use((function(e){return e}),(function(t){e(ue(t.statusText))})),t}((function(){return be.dispatch.apply(be,arguments)})),be=Object(v.a)({reducer:{app:je,news:k},middleware:function(e){return e({thunk:{extraArgument:le}})}}),fe=be;s.a.render(Object(c.jsx)(o.a,{basename:"/",children:Object(c.jsx)(i.a,{store:fe,children:Object(c.jsx)(se,{})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.89aef85b.chunk.js.map