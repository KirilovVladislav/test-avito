(this["webpackJsonptest-avito"]=this["webpackJsonptest-avito"]||[]).push([[0],{32:function(e,t,n){e.exports={card:"Comment_card__B2R2M",btn:"Comment_btn__1QWQt",text:"Comment_text__1-ryg"}},33:function(e,t,n){e.exports={container:"Comments_container__2gEP4",header:"Comments_header__lTxDu",counter:"Comments_counter__AvQSJ"}},55:function(e,t,n){e.exports={newsInfo:"NewsInfo_newsInfo__10hh7"}},56:function(e,t,n){e.exports={title:"NewsItem_title__2B4D3"}},73:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(17),s=n.n(r),i=n(10),o=n(16),u=(n(72),n(73),n(21)),j=n(5),d=n(22),l=n(8),b=n(9),f=n(95),O=n(97),m=n(96),h=n(98),x=n(27),p=n.n(x),w=n(37),v=n(40),g=n(23),I=Object(g.b)({name:"news",initialState:{newsIdList:[],news:[],activeNews:{},comments:[]},reducers:{setNewsIdList:function(e,t){e.newsIdList=t.payload},setNewsItem:function(e,t){e.news=[].concat(Object(v.a)(e.news),[t.payload]),e.news.sort((function(e,t){return t.id-e.id}))},clearNews:function(e){e.news=[]},setActiveNews:function(e,t){e.activeNews=t.payload},setComment:function(e,t){e.comments=[].concat(Object(v.a)(e.comments),[t.payload])}}}),N=I.actions,y=N.setNewsIdList,_=(N.setNewsItem,N.clearNews),k=(N.setActiveNews,N.setComment,function(){return function(){var e=Object(w.a)(p.a.mark((function e(t,n,c){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/newstories.json");case 2:a=e.sent,t(y(a.data.slice(0,100)));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}),S=function(e,t,n){return function(){var c=Object(w.a)(p.a.mark((function c(a,r,s){var i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.get("/item/".concat(e,".json"));case 2:if(!(i=c.sent)||!i.data){c.next=8;break}if(!i.data.deleted){c.next=6;break}return c.abrupt("return");case 6:a(I.actions[t](i.data)),n&&n(i.data);case 8:case"end":return c.stop()}}),c)})));return function(e,t,n){return c.apply(this,arguments)}}()},C=I.reducer,E=n(19),L=n(55),M=n.n(L),A=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n,n<2?" year":" years"):(n=Math.floor(t/2592e3))>1?"".concat(n,n<2?" month":" months"):(n=Math.floor(t/86400))>1?"".concat(n,n<2?" day":" days"):(n=Math.floor(t/3600))>1?"".concat(n,n<2?" hour":" hours"):(n=Math.floor(t/60),"".concat(n,1===n?" minute":" minutes"))},U=function(e){var t=e.time,n=e.children,r=Object(a.useState)(A(t)),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return o(A(t))}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.jsxs)("span",{children:["".concat(i),n]})},T=function(e){var t=e.score,n=e.by,a=e.time;return Object(c.jsxs)("p",{className:M.a.newsInfo,children:[Object(c.jsx)("span",{children:"".concat(t," point")}),Object(c.jsx)("span",{children:"by ".concat(n)}),Object(c.jsx)(U,{time:a,children:" ago"})]})},B=n(56),z=n.n(B),D=Object(a.memo)((function(e){var t=e.id,n=e.loading,r=e.setLoading,s=Object(i.b)(),u=Object(i.c)((function(e){return e.news})).newsIdList,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){s(S(t,"setNewsItem",f))}),[]),Object(a.useEffect)((function(){b.title&&u[u.length-1]===t&&r(!1)}),[b]),Object(c.jsx)(c.Fragment,{children:!n&&b.title&&Object(c.jsxs)(h.a.Item,{children:[Object(c.jsx)(o.b,{to:"/item/".concat(t),children:Object(c.jsx)("h3",{className:z.a.title,children:"".concat(b.title)})}),Object(c.jsx)(T,Object(E.a)({},b))]},t)})})),F=n(94),H=function(e){var t=e.handleUpdate,n=e.children;return Object(c.jsx)(F.a,{onClick:t,children:n})},J=function(e){return Object(j.f)((function(t){var n=Object(i.b)(),r=Object(i.c)((function(e){return e.news})),s=r.activeNews,o=r.newsIdList,u=t.match.params.itemId,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1],O=Object(a.useState)(!0),m=Object(l.a)(O,2),h=m[0],x=m[1],p=Object(a.useState)(!1),w=Object(l.a)(p,2),v=w[0],g=w[1],I=Object(a.useState)(null),N=Object(l.a)(I,2),y=N[0],_=N[1],C=Object(a.useState)(null),L=Object(l.a)(C,2),M=L[0],A=L[1],U=Object(a.useState)(null),T=Object(l.a)(U,2),B=T[0],z=T[1],D={getNewsIdList:k,getItem:S};Object(a.useEffect)((function(){h&&M&&(n(D[M](u,B)),x(!1))}),[M,h]),Object(a.useEffect)((function(){var e=setInterval((function(){x(!0)}),6e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){s.descendants!==b.descendants?(f(s),_(null)):v&&_(!0)}),[s]),Object(a.useEffect)((function(){o[0]!==b[0]?(f(o),_(null)):v&&_(!0)}),[o]),Object(a.useEffect)((function(){if(v){var e=setTimeout((function(){_(null),g(!1)}),5e3);return function(){return clearTimeout(e)}}}),[v]);return Object(c.jsx)(e,Object(E.a)({setAction:z,setCallback:A,data:b,handleUpdate:function(){g(!0),x(!0)},alertMessage:y},t))}))};function Q(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n\n  @media (max-width: 400px) {\n    padding: 0 10px;\n  }\n"]);return Q=function(){return e},e}function R(){var e=Object(u.a)(["\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n"]);return R=function(){return e},e}var P=Object(d.a)(f.a)(R()),W=d.a.header(Q()),q=Object(b.d)(J,a.memo)((function(e){var t=e.setCallback,n=e.data,r=void 0===n?[]:n,s=e.handleUpdate,o=e.alertMessage,u=Object(i.b)(),j=Object(a.useState)(!0),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){return t("getNewsIdList"),function(){return u(_())}}),[]),Object(c.jsxs)(P,{children:[Object(c.jsxs)(W,{children:[Object(c.jsx)("h2",{children:"Hacker News"}),Object(c.jsx)(H,{handleUpdate:s,children:"update news"})]}),o&&Object(c.jsx)(O.a,{variant:"primary",children:"there is no latest news in the feed"}),b&&Object(c.jsx)(m.a,{animation:"border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(c.jsx)(h.a,{children:r[0]&&r.map((function(e){return Object(c.jsx)(D,{loading:b,setLoading:f,id:e},e)}))})]})})),G=n(99),K=n(32),V=n.n(K),X=function e(t){var n=t.id,r=Object(i.b)(),s=Object(a.useState)({}),o=Object(l.a)(s,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),O=b[0],m=b[1];Object(a.useEffect)((function(){r(S(n,"setComment",j))}),[]);return Object(c.jsx)(c.Fragment,{children:u.text&&Object(c.jsx)(G.a,{className:V.a.card,children:Object(c.jsxs)(f.a,{children:[Object(c.jsx)(G.a.Title,{children:"".concat(u.by)}),Object(c.jsx)(G.a.Body,{className:V.a.text,dangerouslySetInnerHTML:{__html:"".concat(u.text)}}),u.kids&&Object(c.jsx)(F.a,{onClick:function(){m((function(e){return!e}))},className:V.a.btn,variant:O?"dark":"outline-dark",children:O?"Hide comments":"Show more comments"}),u.kids&&O&&u.kids.map((function(t){return Object(c.jsx)(e,{id:t},t)}))]})})})},Y=n(33),Z=n.n(Y),$=function(e){var t=e.kids,n=void 0===t?[]:t,a=e.descendants,r=e.children;return Object(c.jsxs)("section",{children:[Object(c.jsxs)(f.a,{className:Z.a.container,children:[Object(c.jsxs)("h4",{className:Z.a.header,children:["Comments",Object(c.jsx)("span",{className:Z.a.counter,children:"".concat(a)})]}),r]}),n.map((function(e){return Object(c.jsx)(X,{id:e},e)}))]})};function ee(){var e=Object(u.a)([""]);return ee=function(){return e},e}Object(d.a)(T)(ee());var te=Object(b.d)(J,a.memo)((function(e){var t=e.setAction,n=e.setCallback,r=e.data,s=void 0===r?{}:r,u=e.handleUpdate,j=e.alertMessage,d=void 0!==j&&j,l=Object(i.b)();return Object(a.useEffect)((function(){n("getItem"),t("setActiveNews"),l(_())}),[]),Object(c.jsx)(f.a,{children:s.title?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(F.a,{variant:"outline-primary",children:"Back to news list"})}),Object(c.jsx)("a",{href:"".concat(s.url),target:"_blank",children:Object(c.jsx)("h3",{children:"".concat(s.title)})}),Object(c.jsx)(T,Object(E.a)({className:"mx-auto"},s)),d&&Object(c.jsx)(O.a,{variant:"primary",children:"there are no latest comments in the feed"}),Object(c.jsx)($,Object(E.a)(Object(E.a)({},s),{},{children:Object(c.jsx)(H,{handleUpdate:u,children:"update comments"})}))]}):Object(c.jsx)(m.a,{animation:"border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})}));function ne(){var e=Object(u.a)(["\n  padding: 10px 0;\n"]);return ne=function(){return e},e}var ce=d.a.main(ne()),ae=function(){return Object(c.jsx)(ce,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(q,{})}}),Object(c.jsx)(j.a,{path:"/item/:itemId",exact:!0,render:function(){return Object(c.jsx)(te,{})}})]})})},re=Object(g.b)({name:"app",initialState:{initialized:!1,error:null},reducers:{setInitialized:function(e,t){e.initialized=t.payload},setError:function(e,t){e.error=t.payload}}}),se=re.actions,ie=(se.setInitialized,se.setError),oe=re.reducer,ue=n(62),je=function(e){var t=ue.create({baseURL:"https://hacker-news.firebaseio.com/v0/",credentials:!0,origin:"http://localhost:3000"});return t.interceptors.response.use((function(e){return e}),(function(t){e(ie(t.statusText))})),t}((function(){return de.dispatch.apply(de,arguments)})),de=Object(g.a)({reducer:{app:oe,news:C},middleware:function(e){return e({thunk:{extraArgument:je}})}}),le=de;s.a.render(Object(c.jsx)(o.a,{children:Object(c.jsx)(i.a,{store:le,children:Object(c.jsx)(ae,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.841fdb81.chunk.js.map