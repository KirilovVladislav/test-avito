(this["webpackJsonptest-avito"]=this["webpackJsonptest-avito"]||[]).push([[0],{30:function(e,t,n){e.exports={card:"Comment_card__B2R2M",btn:"Comment_btn__1QWQt",text:"Comment_text__1-ryg"}},37:function(e,t,n){e.exports={container:"Comments_container__2gEP4",counter:"Comments_counter__AvQSJ"}},54:function(e,t,n){e.exports={newsInfo:"NewsInfo_newsInfo__10hh7"}},55:function(e,t,n){e.exports={title:"NewsItem_title__2B4D3"}},73:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(17),s=n.n(r),i=n(15),o=n(16),u=(n(72),n(73),n(5)),j=n(53),d=n(8),l=n(95),b=n(96),f=n(97),O=n(56),m=n(19),h=n(9),x=n(25),p=n.n(x),v=n(34),w=n(38),I=n(21),y=Object(I.b)({name:"news",initialState:{newsIdList:[],news:[],activeNews:{},comments:[]},reducers:{setNewsIdList:function(e,t){e.newsIdList=t.payload},setNewsItem:function(e,t){e.news=[t.payload].concat(Object(w.a)(e.news))},setActiveNews:function(e,t){e.activeNews=t.payload},setComment:function(e,t){e.comments=[].concat(Object(w.a)(e.comments),[t.payload])}}}),_=y.actions,g=_.setNewsIdList,N=(_.setNewsItem,_.setActiveNews,_.setComment,function(){return function(){var e=Object(v.a)(p.a.mark((function e(t,n,c){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/newstories.json");case 2:a=e.sent,t(g(a.data.slice(0,100)));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}),k=function(e,t,n){return function(){var c=Object(v.a)(p.a.mark((function c(a,r,s){var i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.get("/item/".concat(e,".json"));case 2:if(!(i=c.sent)||!i.data){c.next=8;break}if(!i.data.deleted){c.next=6;break}return c.abrupt("return");case 6:a(y.actions[t](i.data)),n&&n(i.data);case 8:case"end":return c.stop()}}),c)})));return function(e,t,n){return c.apply(this,arguments)}}()},S=y.reducer,C=n(54),E=n.n(C),M=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n," years"):(n=Math.floor(t/2592e3))>1?"".concat(n," months"):(n=Math.floor(t/86400))>1?"".concat(n," days"):(n=Math.floor(t/3600))>1?"".concat(n," hours"):(n=Math.floor(t/60),"".concat(n," minutes"))},L=function(e){var t=e.time,n=e.children,r=Object(a.useState)(M(t)),s=Object(h.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return o(M(t))}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.jsxs)("span",{children:["".concat(i),n]})},A=function(e){var t=e.score,n=e.by,a=e.time;return Object(c.jsxs)("p",{className:E.a.newsInfo,children:[Object(c.jsx)("span",{children:"".concat(t," point")}),Object(c.jsx)("span",{children:"by ".concat(n)}),Object(c.jsx)(L,{time:a,children:" ago"})]})},U=n(55),B=n.n(U),T=Object(a.memo)((function(e){var t=e.id,n=Object(i.b)(),r=Object(a.useState)({}),s=Object(h.a)(r,2),u=s[0],j=s[1];return Object(a.useEffect)((function(){n(k(t,"setNewsItem",j))}),[]),Object(c.jsx)(c.Fragment,{children:u.title&&Object(c.jsxs)(f.a.Item,{children:[Object(c.jsx)(o.b,{to:"/item/".concat(t),children:Object(c.jsx)("h3",{className:B.a.title,children:"".concat(u.title)})}),Object(c.jsx)(A,Object(m.a)({},u))]},t)})})),z=n(94),F=function(e){var t=e.handleUpdate,n=e.children;return Object(c.jsx)(z.a,{onClick:t,children:n})},H=function(e){return Object(u.f)((function(t){var n=Object(i.b)(),r=Object(i.c)((function(e){return e.news})),s=r.activeNews,o=r.newsIdList,u=t.match.params.itemId,j=Object(a.useState)({}),d=Object(h.a)(j,2),l=d[0],b=d[1],f=Object(a.useState)(!0),O=Object(h.a)(f,2),x=O[0],p=O[1],v=Object(a.useState)(!1),w=Object(h.a)(v,2),I=w[0],y=w[1],_=Object(a.useState)(null),g=Object(h.a)(_,2),S=g[0],C=g[1],E=Object(a.useState)(null),M=Object(h.a)(E,2),L=M[0],A=M[1],U=Object(a.useState)(null),B=Object(h.a)(U,2),T=B[0],z=B[1],F={getNewsIdList:N,getItem:k};Object(a.useEffect)((function(){x&&L&&(n(F[L](u,T)),p(!1))}),[L,x]),Object(a.useEffect)((function(){var e=setInterval((function(){p(!0)}),6e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){s.descendants!==l.descendants?(b(s),C(null)):I&&C(!0),y(!1)}),[s]),Object(a.useEffect)((function(){o[0]!==l[0]?(b(o),C(null)):I&&C(!0)}),[o]),Object(a.useEffect)((function(){if(I){var e=setTimeout((function(){C(null)}),5e3);return function(){return clearTimeout(e)}}}),[I]);return Object(c.jsx)(e,Object(m.a)({setAction:z,setCallback:A,data:l,handleUpdate:function(){y(!0),p(!0)},alertMessage:S},t))}))};function J(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n"]);return J=function(){return e},e}var Q=O.a.header(J()),D=Object(d.d)(H,a.memo)((function(e){var t=e.setCallback,n=e.data,r=void 0===n?[]:n,s=e.handleUpdate,i=e.alertMessage,o=void 0!==i&&i;return Object(a.useEffect)((function(){t("getNewsIdList")}),[]),Object(c.jsxs)(l.a,{children:[Object(c.jsxs)(Q,{children:[Object(c.jsx)("h2",{children:"Hacker News"}),Object(c.jsx)(F,{handleUpdate:s,children:"update news"})]}),o&&Object(c.jsx)(b.a,{variant:"primary",children:"there is no latest news in the feed"}),Object(c.jsx)(f.a,{children:r[0]&&r.map((function(e){return Object(c.jsx)(T,{id:e},e)}))})]})})),R=n(98),K=n(30),P=n.n(K),V=function e(t){var n=t.id,r=Object(i.b)(),s=Object(a.useState)({}),o=Object(h.a)(s,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(h.a)(d,2),f=b[0],O=b[1];Object(a.useEffect)((function(){r(k(n,"setComment",j))}),[]);return Object(c.jsx)(c.Fragment,{children:u.text&&Object(c.jsx)(R.a,{className:P.a.card,children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(R.a.Title,{children:"".concat(u.by)}),Object(c.jsx)(R.a.Body,{className:P.a.text,dangerouslySetInnerHTML:{__html:"".concat(u.text)}}),u.kids&&Object(c.jsx)(z.a,{onClick:function(){O((function(e){return!e}))},className:P.a.btn,variant:f?"dark":"outline-dark",children:f?"Hide comments":"Show more comments"}),u.kids&&f&&u.kids.map((function(t){return Object(c.jsx)(e,{id:t},t)}))]})})})},W=n(37),q=n.n(W),G=function(e){var t=e.kids,n=void 0===t?[]:t,a=e.descendants,r=e.children;return Object(c.jsxs)("section",{children:[Object(c.jsxs)(l.a,{className:q.a.container,children:[Object(c.jsxs)("h4",{children:["Comments",Object(c.jsx)("span",{className:q.a.counter,children:"".concat(a)})]}),r]}),n.map((function(e){return Object(c.jsx)(V,{id:e},e)}))]})},X=Object(d.d)(H,a.memo)((function(e){var t=e.setAction,n=e.setCallback,r=e.data,s=void 0===r?{}:r,i=e.handleUpdate,u=e.alertMessage,j=void 0!==u&&u;return Object(a.useEffect)((function(){n("getItem"),t("setActiveNews")}),[]),Object(c.jsx)(l.a,{children:s.title?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(z.a,{variant:"outline-primary",children:"Back to news list"})}),Object(c.jsx)("a",{href:"".concat(s.url),target:"_blank",children:Object(c.jsx)("h3",{children:"".concat(s.title)})}),Object(c.jsx)(A,Object(m.a)({},s)),j&&Object(c.jsx)(b.a,{variant:"primary",children:"there are no latest comments in the feed"}),Object(c.jsx)(G,Object(m.a)(Object(m.a)({},s),{},{children:Object(c.jsx)(F,{handleUpdate:i,children:"update comments"})}))]}):Object(c.jsx)("div",{children:"load"})})})),Y=function(){return Object(c.jsx)("main",{style:{padding:"10px"},children:Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(D,{})}}),Object(c.jsx)(u.a,{path:"/item/:itemId",exact:!0,render:function(){return Object(c.jsx)(X,{})}})]})})},Z=Object(I.b)({name:"app",initialState:{initialized:!1,error:null},reducers:{setInitialized:function(e,t){e.initialized=t.payload},setError:function(e,t){e.error=t.payload}}}),$=Z.actions,ee=($.setInitialized,$.setError),te=Z.reducer,ne=n(62),ce=function(e){var t=ne.create({baseURL:"https://hacker-news.firebaseio.com/v0/",credentials:!0,origin:"http://localhost:3000"});return t.interceptors.response.use((function(e){return e}),(function(t){e(ee(t.statusText))})),t}((function(){return ae.dispatch.apply(ae,arguments)})),ae=Object(I.a)({reducer:{app:te,news:S},middleware:function(e){return e({thunk:{extraArgument:ce}})}}),re=ae;s.a.render(Object(c.jsx)(o.a,{basename:"https://KirilovVladislav.github.io/test-avito",children:Object(c.jsx)(i.a,{store:re,children:Object(c.jsx)(Y,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.21e9f3a0.chunk.js.map