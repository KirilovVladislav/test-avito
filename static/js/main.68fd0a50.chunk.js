(this["webpackJsonptest-avito"]=this["webpackJsonptest-avito"]||[]).push([[0],{32:function(e,t,n){e.exports={card:"Comment_card__B2R2M",btn:"Comment_btn__1QWQt",text:"Comment_text__1-ryg"}},33:function(e,t,n){e.exports={container:"Comments_container__2gEP4",header:"Comments_header__lTxDu",counter:"Comments_counter__AvQSJ"}},55:function(e,t,n){e.exports={newsInfo:"NewsInfo_newsInfo__10hh7"}},56:function(e,t,n){e.exports={title:"NewsItem_title__2B4D3"}},57:function(e,t,n){e.exports={overlay:"Overlay_overlay__3_p4L"}},74:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(17),s=n.n(r),i=n(10),o=n(16),u=(n(73),n(74),n(23)),j=n(5),d=n(25),l=n(8),b=n(9),f=n(97),O=n(98),m=n(99),h=n(27),x=n.n(h),p=n(37),v=n(40),w=n(22),_=Object(w.b)({name:"news",initialState:{newsIdList:[],news:[],activeNews:{},comments:[]},reducers:{setNewsIdList:function(e,t){e.newsIdList=t.payload},setNewsItem:function(e,t){e.news=[].concat(Object(v.a)(e.news),[t.payload]),e.news.sort((function(e,t){return t.id-e.id}))},clearNews:function(e){e.news=[]},setActiveNews:function(e,t){e.activeNews=t.payload},setComment:function(e,t){e.comments=[].concat(Object(v.a)(e.comments),[t.payload])}}}),g=_.actions,y=g.setNewsIdList,I=(g.setNewsItem,g.clearNews),N=(g.setActiveNews,g.setComment,function(){return function(){var e=Object(p.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/newstories.json");case 2:a=e.sent,t(y(a.data.slice(0,100)));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}),k=function(e,t,n){return function(){var c=Object(p.a)(x.a.mark((function c(a,r,s){var i;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.get("/item/".concat(e,".json"));case 2:if(!(i=c.sent)||!i.data){c.next=8;break}if(!i.data.deleted){c.next=6;break}return c.abrupt("return");case 6:a(_.actions[t](i.data)),n&&n(i.data);case 8:case"end":return c.stop()}}),c)})));return function(e,t,n){return c.apply(this,arguments)}}()},S=_.reducer,C=n(19),E=n(55),L=n.n(E),M=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n,n<2?" year":" years"):(n=Math.floor(t/2592e3))>1?"".concat(n,n<2?" month":" months"):(n=Math.floor(t/86400))>1?"".concat(n,n<2?" day":" days"):(n=Math.floor(t/3600))>1?"".concat(n,n<2?" hour":" hours"):(n=Math.floor(t/60),"".concat(n,1===n?" minute":" minutes"))},A=function(e){var t=e.time,n=e.children,r=Object(a.useState)(M(t)),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return o(M(t))}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.jsxs)("span",{children:["".concat(i),n]})},U=function(e){var t=e.score,n=e.by,a=e.time;return Object(c.jsxs)("p",{className:L.a.newsInfo,children:[Object(c.jsx)("span",{children:"".concat(t," ").concat(1===t?"point":"points")}),Object(c.jsx)("span",{children:"by ".concat(n)}),Object(c.jsx)(A,{time:a,children:" ago"})]})},T=n(56),B=n.n(T),z=Object(a.memo)((function(e){var t=e.id,n=e.loading,r=e.setLoading,s=Object(i.b)(),u=Object(i.c)((function(e){return e.news})).newsIdList,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){s(k(t,"setNewsItem",f))}),[]),Object(a.useEffect)((function(){b.title&&u[u.length-1]===t&&r(!1)}),[b]),Object(c.jsx)(c.Fragment,{children:!n&&b.title&&Object(c.jsxs)(m.a.Item,{children:[Object(c.jsx)(o.b,{to:"/item/".concat(t),children:Object(c.jsx)("h3",{className:B.a.title,children:"".concat(b.title)})}),Object(c.jsx)(U,Object(C.a)({},b))]},t)})})),D=n(95),F=function(e){var t=e.handleUpdate,n=e.children;return Object(c.jsx)(D.a,{onClick:t,children:n})},H=n(96),J=n(57),Q=n.n(J),R=function(){return Object(c.jsx)("section",{className:Q.a.overlay,children:Object(c.jsx)(H.a,{animation:"border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})},P=function(e){return Object(j.f)((function(t){var n=Object(i.b)(),r=Object(i.c)((function(e){return e.news})),s=r.activeNews,o=r.newsIdList,u=t.match.params.itemId,j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],f=d[1],O=Object(a.useState)(!0),m=Object(l.a)(O,2),h=m[0],x=m[1],p=Object(a.useState)(!1),v=Object(l.a)(p,2),w=v[0],_=v[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),I=y[0],S=y[1],E=Object(a.useState)(null),L=Object(l.a)(E,2),M=L[0],A=L[1],U=Object(a.useState)(null),T=Object(l.a)(U,2),B=T[0],z=T[1],D={getNewsIdList:N,getItem:k};Object(a.useEffect)((function(){h&&M&&(n(D[M](u,B)),x(!1))}),[M,h]),Object(a.useEffect)((function(){var e=setInterval((function(){x(!0)}),6e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){s.descendants!==b.descendants?(f(s),S(null)):w&&S(!0)}),[s]),Object(a.useEffect)((function(){o[0]!==b[0]?(f(o),S(null)):w&&S(!0)}),[o]),Object(a.useEffect)((function(){if(w){var e=setTimeout((function(){S(null),_(!1)}),5e3);return function(){return clearTimeout(e)}}}),[w]);return Object(c.jsx)(e,Object(C.a)({setAction:z,setCallback:A,data:b,handleUpdate:function(){_(!0),x(!0)},alertMessage:I},t))}))};function W(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n\n  @media (max-width: 480px) {\n    padding: 0 10px;\n  }\n"]);return W=function(){return e},e}function q(){var e=Object(u.a)(["\n  @media (max-width: 480px) {\n    padding: 0;\n  }\n"]);return q=function(){return e},e}var G=Object(d.a)(f.a)(q()),K=d.a.header(W()),V=Object(b.d)(P,a.memo)((function(e){var t=e.setCallback,n=e.data,r=void 0===n?[]:n,s=e.handleUpdate,o=e.alertMessage,u=Object(i.b)(),j=Object(a.useState)(!0),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){return t("getNewsIdList"),function(){return u(I())}}),[]),Object(c.jsxs)(G,{children:[Object(c.jsxs)(K,{children:[Object(c.jsx)("h2",{children:"Hacker News"}),Object(c.jsx)(F,{handleUpdate:s,children:"update news"})]}),o&&Object(c.jsx)(O.a,{variant:"primary",children:"there is no latest news in the feed"}),b&&Object(c.jsx)(R,{}),Object(c.jsx)(m.a,{children:r[0]&&r.map((function(e){return Object(c.jsx)(z,{loading:b,setLoading:f,id:e},e)}))})]})})),X=n(100),Y=n(32),Z=n.n(Y),$=function e(t){var n=t.id,r=Object(i.b)(),s=Object(a.useState)({}),o=Object(l.a)(s,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),O=b[0],m=b[1];Object(a.useEffect)((function(){r(k(n,"setComment",j))}),[]);return Object(c.jsx)(c.Fragment,{children:u.text&&Object(c.jsx)(X.a,{className:Z.a.card,children:Object(c.jsxs)(f.a,{children:[Object(c.jsx)(X.a.Title,{children:"".concat(u.by)}),Object(c.jsx)(X.a.Body,{className:Z.a.text,dangerouslySetInnerHTML:{__html:"".concat(u.text)}}),u.kids&&Object(c.jsx)(D.a,{onClick:function(){m((function(e){return!e}))},className:Z.a.btn,variant:O?"dark":"outline-dark",children:O?"Hide comments":"Show more comments"}),u.kids&&O&&u.kids.map((function(t){return Object(c.jsx)(e,{id:t},t)}))]})})})},ee=n(33),te=n.n(ee),ne=function(e){var t=e.kids,n=void 0===t?[]:t,a=e.descendants,r=e.children;return Object(c.jsxs)("section",{children:[Object(c.jsxs)(f.a,{className:te.a.container,children:[Object(c.jsxs)("h4",{className:te.a.header,children:["Comments",Object(c.jsx)("span",{className:te.a.counter,children:"".concat(a)})]}),r]}),n.map((function(e){return Object(c.jsx)($,{id:e},e)}))]})},ce=Object(b.d)(P,a.memo)((function(e){var t=e.setAction,n=e.setCallback,r=e.data,s=void 0===r?{}:r,u=e.handleUpdate,j=e.alertMessage,d=void 0!==j&&j,l=Object(i.b)();return Object(a.useEffect)((function(){n("getItem"),t("setActiveNews"),l(I())}),[]),Object(c.jsx)(f.a,{children:s.title?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(D.a,{variant:"outline-primary",children:"Back to news list"})}),Object(c.jsx)("a",{href:"".concat(s.url),target:"_blank",children:Object(c.jsx)("h3",{children:"".concat(s.title)})}),Object(c.jsx)(U,Object(C.a)({className:"mx-auto"},s)),d&&Object(c.jsx)(O.a,{variant:"primary",children:"there are no latest comments in the feed"}),Object(c.jsx)(ne,Object(C.a)(Object(C.a)({},s),{},{children:Object(c.jsx)(F,{handleUpdate:u,children:"update comments"})}))]}):Object(c.jsx)(R,{})})}));function ae(){var e=Object(u.a)(["\n  padding: 10px 0;\n"]);return ae=function(){return e},e}var re=d.a.main(ae()),se=function(){return Object(c.jsx)(re,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(V,{})}}),Object(c.jsx)(j.a,{path:"/item/:itemId",exact:!0,render:function(){return Object(c.jsx)(ce,{})}})]})})},ie=Object(w.b)({name:"app",initialState:{initialized:!1,error:null},reducers:{setInitialized:function(e,t){e.initialized=t.payload},setError:function(e,t){e.error=t.payload}}}),oe=ie.actions,ue=(oe.setInitialized,oe.setError),je=ie.reducer,de=n(63),le=function(e){var t=de.create({baseURL:"https://hacker-news.firebaseio.com/v0/",credentials:!0,origin:"http://localhost:3000"});return t.interceptors.response.use((function(e){return e}),(function(t){e(ue(t.statusText))})),t}((function(){return be.dispatch.apply(be,arguments)})),be=Object(w.a)({reducer:{app:je,news:S},middleware:function(e){return e({thunk:{extraArgument:le}})}}),fe=be;s.a.render(Object(c.jsx)(o.a,{basename:"/",children:Object(c.jsx)(i.a,{store:fe,children:Object(c.jsx)(se,{})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.68fd0a50.chunk.js.map